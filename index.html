<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programming Learning Explorer</title>
    <style>
        body { display: flex; font-family: Arial, sans-serif; }
        .keywords { width: 20%; padding: 20px; background-color: #f4f4f4; }
        .markdown { width: 80%; padding: 20px; }
        .keyword, .topic { display: block; margin: 5px 0; padding: 10px; border-radius: 5px; background-color: #007bff; color: white; text-decoration: none; text-align: center; }
        .keyword:hover, .topic:hover { background-color: #0056b3; }
        #clear-all { display: block; margin: 10px 0; padding: 10px; border-radius: 5px; background-color: #dc3545; color: white; text-align: center; cursor: pointer; }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/13.0.2/markdown-it.min.js"></script>
</head>
<body>
    <div class="keywords">
        <h3>Available Topics</h3>
        {{ range .AvailableTopics }}
        <a href="/generate?keyword={{ . }}" class="topic">{{ . }}</a>
        {{ end }}

        <h3>Your Keywords</h3>
        {{ range .Keywords }}
        <a href="#" class="keyword">{{ . }}</a>
        {{ end }}

        <button id="clear-all">Clear All</button>
    </div>
    <div class="markdown" id="markdown-content">
        <h3>Generated Content</h3>
        <div id="content"></div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var md = window.markdownit();
            var rawMarkdown = `{{.MarkdownOutput}}`; // Insert the raw Markdown here
            var result = md.render(rawMarkdown);
            document.getElementById("content").innerHTML = result;

            // Handle Clear All button click
            document.getElementById("clear-all").addEventListener("click", function() {
                fetch("/clear", { method: "POST" })
                    .then(response => {
                        if (response.ok) {
                            window.location.reload();
                        } else {
                            alert("Failed to clear the session.");
                        }
                    });
            });
        });
    </script>
</body>
</html>
